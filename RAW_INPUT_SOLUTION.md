# Raw Inputæ¸¸æˆå…¼å®¹æ€§è§£å†³æ–¹æ¡ˆ

## é—®é¢˜æè¿°

åœ¨å¼€å‘AIè‡ªç„ç³»ç»Ÿè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†**Raw Inputæ¸¸æˆå…¼å®¹æ€§é—®é¢˜**ï¼š

### æ ¸å¿ƒé—®é¢˜
- é¼ æ ‡èƒ½ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®ï¼Œä½†**æ¸¸æˆå†…å‡†å¿ƒä¸è·Ÿéš**
- ä½¿ç”¨Windows API `SetCursorPos()`è®¾ç½®ç»å¯¹åæ ‡æ—¶ï¼Œæ¸¸æˆçª—å£ä¸­çš„å‡†å¿ƒä½ç½®ä¸å‘ç”Ÿå˜åŒ–
- è¿™æ˜¯å› ä¸ºä½¿ç”¨Raw Inputçš„æ¸¸æˆåªè¯†åˆ«**å®é™…çš„é¼ æ ‡ç§»åŠ¨äº‹ä»¶**ï¼Œè€Œä¸æ˜¯ç®€å•çš„å…‰æ ‡ä½ç½®æ”¹å˜

### å½±å“çš„æ¸¸æˆç±»å‹
- å¤§éƒ¨åˆ†ç°ä»£FPSæ¸¸æˆï¼ˆCS2ã€Valorantã€Apex Legendsç­‰ï¼‰
- ä½¿ç”¨Raw InputæŠ€æœ¯çš„ç«æŠ€æ¸¸æˆ
- éœ€è¦ç²¾ç¡®é¼ æ ‡è¾“å…¥çš„æ¸¸æˆ

## è§£å†³æ–¹æ¡ˆæ¼”è¿›

### æ–¹æ¡ˆ1ï¼šWindows APIç›¸å¯¹ç§»åŠ¨ âŒ
**å®ç°æ–¹å¼ï¼š**
```python
# ä½¿ç”¨Windows API mouse_eventè¿›è¡Œç›¸å¯¹ç§»åŠ¨
ctypes.windll.user32.mouse_event(1, relative_x, relative_y, 0, 0)  # MOUSEEVENTF_MOVE=1
```

**é—®é¢˜ï¼š**
- ç”¨æˆ·åé¦ˆç§»åŠ¨è´¨é‡å·®ï¼Œç§°ä¸º"åƒåœ¾"
- ç²¾åº¦å’Œæµç•…åº¦ä¸æ»¡è¶³è¦æ±‚
- ä¸æ˜¯ç†æƒ³çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ2ï¼šmouse_newç»å¯¹ç§»åŠ¨ âŒ
**å®ç°æ–¹å¼ï¼š**
```python
# ä½¿ç”¨mouse_newåº“çš„ç»å¯¹ç§»åŠ¨API
mouse_new.move(target_x, target_y, absolute=True, duration=0)
```

**é—®é¢˜å‘ç°ï¼š**
- **å†…éƒ¨ä»ä½¿ç”¨SetCursorPos**ï¼šmouse_new.move()å†…éƒ¨è°ƒç”¨SetCursorPosï¼ŒRaw Inputæ¸¸æˆä¸è¯†åˆ«
- **å‡†å¿ƒä¸è·Ÿéš**ï¼šé¼ æ ‡å…‰æ ‡ç§»åŠ¨äº†ï¼Œä½†æ¸¸æˆå‡†å¿ƒæ²¡æœ‰è·Ÿéš

### æ–¹æ¡ˆ3ï¼šmouse_newåº•å±‚ç›¸å¯¹ç§»åŠ¨ âœ…
**å®ç°æ–¹å¼ï¼š**
```python
# ç›´æ¥ä½¿ç”¨mouse_newåº•å±‚ç›¸å¯¹ç§»åŠ¨API
relative_x = target_x - current_x
relative_y = target_y - current_y
mouse_new._os_mouse.move_relative(relative_x, relative_y)
```

**ä¼˜åŠ¿ï¼š**
- **Raw InputçœŸæ­£å…¼å®¹**ï¼šç›´æ¥è°ƒç”¨mouse_event(MOUSEEVENTF_MOVE)ï¼ŒRaw Inputæ¸¸æˆèƒ½è¯†åˆ«
- **ç¡¬ä»¶çº§äº‹ä»¶**ï¼šå‘é€çœŸå®çš„é¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼Œè€Œéå…‰æ ‡ä½ç½®æ”¹å˜
- **é«˜æ€§èƒ½**ï¼šAPIè°ƒç”¨æ—¶é—´é€šå¸¸åœ¨0.3-1.0ms
- **é›¶ç´¯ç§¯è¯¯å·®**ï¼šæ¯æ¬¡éƒ½åŸºäºå½“å‰ä½ç½®è®¡ç®—ç›¸å¯¹ç§»åŠ¨é‡

## æŠ€æœ¯å®ç°ç»†èŠ‚

### å…³é”®ä»£ç 
```python
def execute_instant_move(self, target_x, target_y, current_x, current_y, distance):
    """æ‰§è¡Œæé€Ÿç¬ç§» - ä½¿ç”¨mouse_newåº•å±‚ç›¸å¯¹ç§»åŠ¨API"""
    # è®¡ç®—ç›¸å¯¹ç§»åŠ¨é‡
    relative_x = target_x - current_x
    relative_y = target_y - current_y
    
    try:
        # ğŸš€ æé€Ÿç¬ç§»ï¼šä½¿ç”¨mouse_newåº•å±‚ç›¸å¯¹ç§»åŠ¨ï¼ŒRaw InputçœŸæ­£è¯†åˆ«
        mouse_new._os_mouse.move_relative(relative_x, relative_y)
        return True
    except Exception as e:
        logger.error(f"âŒ Raw Inputç›¸å¯¹ç¬ç§»å¤±è´¥: {e}")
        return False
```

### æ€§èƒ½ä¼˜åŒ–
- **é¢„éªŒè¯APIå¯ç”¨æ€§**ï¼šå¯åŠ¨æ—¶æ£€æŸ¥`mouse_new._os_mouse.move_relative`å‡½æ•°å¯ç”¨æ€§
- **ç›¸å¯¹ç§»åŠ¨è®¡ç®—**ï¼šæ¯æ¬¡åŸºäºå½“å‰é¼ æ ‡ä½ç½®è®¡ç®—ç›¸å¯¹ç§»åŠ¨é‡ï¼Œé¿å…ç´¯ç§¯è¯¯å·®
- **æ€§èƒ½ç›‘æ§**ï¼šè¯¦ç»†è®°å½•APIè°ƒç”¨æ—¶é—´ï¼ˆé€šå¸¸0.3-1.0msï¼‰

### é¢‘ç¹å¾®è°ƒé—®é¢˜è§£å†³
**é—®é¢˜ï¼š** å³ä½¿å•æ¬¡ç§»åŠ¨å¾ˆå¿«ï¼Œä½†é¢‘ç¹çš„å¾®è°ƒï¼ˆ150pxâ†’100pxâ†’50pxâ†’20pxï¼‰å¯¼è‡´ç§»åŠ¨æ„Ÿè§‰å¡é¡¿

**è§£å†³æ–¹æ¡ˆï¼š** åœ¨ç›®æ ‡é€‰æ‹©é˜¶æ®µå°±è¿‡æ»¤è¿‡è¿‘ç›®æ ‡
```python
# ğŸ”¥ å¼ºåˆ¶æ»¡æ„è·ç¦»æ£€æŸ¥ - 50pxå†…ç›´æ¥å¿½ç•¥ç›®æ ‡
FORCE_SATISFIED_DISTANCE = 50
if mouse_to_target_distance < FORCE_SATISFIED_DISTANCE:
    logger.info(f"ğŸ¯ ç›®æ ‡è¿‡è¿‘ {mouse_to_target_distance:.1f}px [å¿½ç•¥ç›®æ ‡]")
    return None
```

## é…ç½®å‚æ•°

### å…³é”®é…ç½®
```ini
# ç§»åŠ¨é”å®šæ—¶é—´ï¼ˆç§’ï¼‰- ç§»åŠ¨åé”å®šæœŸé—´ï¼Œé˜²æ­¢é¢‘ç¹å¾®è°ƒ
mouse_movement_lock = 0.25

# æ»¡æ„è·ç¦»ï¼ˆåƒç´ ï¼‰- è·ç¦»å°äºæ­¤å€¼æ—¶åœæ­¢è¿½è¸ª
mouse_satisfied_distance = 30

# æ˜¾ç¤ºè¯¦ç»†çš„ç§»åŠ¨æ—¶é—´ç›‘æ§ä¿¡æ¯
mouse_show_timing = True
```

### ä¼˜åŒ–ç­–ç•¥
1. **ç§»åŠ¨é”å®šæœºåˆ¶**ï¼šç§»åŠ¨åé”å®š250msï¼Œé˜²æ­¢é¢‘ç¹å¾®è°ƒ
2. **æ»¡æ„è·ç¦»é˜ˆå€¼**ï¼š30pxå†…åœæ­¢è¿½è¸ªï¼Œé¿å…è¿‡åº¦ç²¾ç¡®
3. **ç›®æ ‡è¿‡æ»¤**ï¼šé€‰æ‹©ç›®æ ‡æ—¶å°±è¿‡æ»¤50pxå†…çš„è¿‡è¿‘ç›®æ ‡

## éªŒè¯æ–¹æ³•

### æµ‹è¯•å‡†æ˜Ÿè·Ÿéš
1. å¯åŠ¨æ”¯æŒRaw Inputçš„æ¸¸æˆ
2. è¿è¡ŒAIè‡ªç„ç³»ç»Ÿ
3. è§‚å¯Ÿæ¸¸æˆå†…å‡†å¿ƒæ˜¯å¦è·Ÿéšé¼ æ ‡ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®
4. ç¡®è®¤å‡†å¿ƒä½ç½®ä¸é¼ æ ‡å…‰æ ‡ä½ç½®ä¸€è‡´

### æ€§èƒ½æŒ‡æ ‡
- **ç§»åŠ¨é€Ÿåº¦**ï¼šå•æ¬¡ç§»åŠ¨0.3-1.0ms
- **ç²¾ç¡®åº¦**ï¼šç»å¯¹åæ ‡ï¼Œæ— ç´¯ç§¯è¯¯å·®
- **æµç•…åº¦**ï¼šé€šè¿‡ç§»åŠ¨é”å®šæœºåˆ¶æ¶ˆé™¤å¡é¡¿æ„Ÿ

## æœ€ç»ˆæ•ˆæœ

### æˆåŠŸæŒ‡æ ‡
- âœ… æ¸¸æˆå‡†å¿ƒå®Œç¾è·Ÿéšé¼ æ ‡ç§»åŠ¨
- âœ… ç§»åŠ¨é€Ÿåº¦æå¿«ï¼ˆäºšæ¯«ç§’çº§ï¼‰
- âœ… æ¶ˆé™¤é¢‘ç¹å¾®è°ƒå¡é¡¿
- âœ… Raw Inputæ¸¸æˆå®Œå…¨å…¼å®¹

### æ—¥å¿—ç¤ºä¾‹
```
ğŸš€ Raw Inputç›¸å¯¹ç¬ç§»: (157, -12), è·ç¦»157.5px [APIè€—æ—¶0.327ms]
âš¡ HEAD ONLY Raw Inputç§»åŠ¨å®Œæˆ: æ€»è€—æ—¶0.58ms
ğŸ”’ ç§»åŠ¨é”å®šå¯åŠ¨: 250mså†…ç¦æ­¢å¾®è°ƒ
ğŸ¯ ç›®æ ‡è¿‡è¿‘ 45.2px < 50px [å¿½ç•¥ç›®æ ‡]
```

## å…³é”®ç»éªŒæ€»ç»“

1. **Raw Inputå…¼å®¹æ€§**ï¼šå¿…é¡»ä½¿ç”¨èƒ½è§¦å‘å®é™…é¼ æ ‡äº‹ä»¶çš„APIï¼Œè€Œä¸æ˜¯ç®€å•çš„å…‰æ ‡ä½ç½®è®¾ç½®
2. **APIæ·±åº¦åˆ†æ**ï¼šmouse_new.move()å†…éƒ¨ä½¿ç”¨SetCursorPosï¼Œåªæœ‰åº•å±‚move_relative()ä½¿ç”¨mouse_event
3. **ç¡¬ä»¶äº‹ä»¶å¿…è¦æ€§**ï¼šRaw Inputæ¸¸æˆåªè¯†åˆ«mouse_eventå‘é€çš„ç¡¬ä»¶çº§é¼ æ ‡äº‹ä»¶
4. **ç›¸å¯¹ç§»åŠ¨ä¼˜åŠ¿**ï¼šè™½ç„¶éœ€è¦è®¡ç®—ç›¸å¯¹é‡ï¼Œä½†èƒ½è¢«Raw Inputæ­£ç¡®è¯†åˆ«
5. **é¢‘ç¹å¾®è°ƒé—®é¢˜**ï¼šé€šè¿‡åœ¨ç›®æ ‡é€‰æ‹©é˜¶æ®µè¿‡æ»¤è§£å†³ï¼Œè€Œä¸æ˜¯åœ¨ç§»åŠ¨é˜¶æ®µé™åˆ¶
6. **ç”¨æˆ·ä½“éªŒ**ï¼šç§»åŠ¨é”å®šæœºåˆ¶æ˜¯æ¶ˆé™¤å¡é¡¿æ„Ÿçš„å…³é”®

## ç›¸å…³æ–‡ä»¶

- `logic/mouse_pure.py` - ä¸»è¦å®ç°æ–‡ä»¶
- `logic/frame_parser_simple.py` - ç›®æ ‡é€‰æ‹©è¿‡æ»¤é€»è¾‘
- `config.ini` - é…ç½®å‚æ•°
- `mouse_new/` - é¼ æ ‡APIåº“

---

*æ­¤è§£å†³æ–¹æ¡ˆå·²åœ¨å¤šæ¬¾Raw Inputæ¸¸æˆä¸­éªŒè¯æœ‰æ•ˆï¼Œå®ç°äº†äºšæ¯«ç§’çº§çš„ç²¾ç¡®ç§»åŠ¨å’Œå®Œç¾çš„å‡†å¿ƒè·Ÿéšæ•ˆæœã€‚*