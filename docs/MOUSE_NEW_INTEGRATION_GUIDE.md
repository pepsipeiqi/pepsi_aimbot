# Mouse_new é›†æˆæŒ‡å—

## æ¦‚è¿°

æœ¬é¡¹ç›®å·²æˆåŠŸé›†æˆ mouse_new åº“ï¼Œæä¾›äº†ä¸€å¥—å…¨æ–°çš„è¶…ç®€åŒ–é¼ æ ‡æ§åˆ¶ç³»ç»Ÿã€‚æ–°ç³»ç»Ÿä¸“æ³¨äº YOLO æ£€æµ‹ â†’ åæ ‡è®¡ç®— â†’ ä¸€æ­¥åˆ°ä½ç§»åŠ¨ â†’ é”å®šå¼€æªçš„æµç¨‹ã€‚

## æ–°å¢æ–‡ä»¶

### æ ¸å¿ƒç»„ä»¶

1. **`logic/mouse_new_controller.py`** - åŸºäº mouse_new çš„é¼ æ ‡æ§åˆ¶å™¨
   - æä¾›é«˜ç²¾åº¦ç›¸å¯¹ç§»åŠ¨
   - æ™ºèƒ½ç›®æ ‡é”å®šé€»è¾‘
   - æ”¯æŒå¤´éƒ¨/èº«ä½“ç›®æ ‡åŒºåˆ†

2. **`logic/mouse_ultra_simple.py`** - è¶…ç®€åŒ–é¼ æ ‡æ§åˆ¶é€»è¾‘
   - ç®€åŒ–çš„æ•°æ®å¤„ç†æµç¨‹
   - ç›´æ¥æœ‰æ•ˆçš„ç›®æ ‡å¤„ç†

3. **`run_ultra_simple.py`** - æ–°çš„è¿è¡Œè„šæœ¬
   - ä½¿ç”¨ mouse_new åº“çš„å®Œæ•´æµç¨‹
   - ç®€åŒ–çš„æ£€æµ‹å’Œç§»åŠ¨pipeline

### è¾…åŠ©æ–‡ä»¶

4. **`run_ultra_simple.bat`** - ä¾¿æ·å¯åŠ¨è„šæœ¬
5. **`test_mouse_new_basic.py`** - åŸºç¡€åŠŸèƒ½æµ‹è¯•
6. **`MOUSE_NEW_INTEGRATION_GUIDE.md`** - æœ¬æŒ‡å—æ–‡æ¡£

## æŠ€æœ¯ç‰¹ç‚¹

### é¼ æ ‡ç§»åŠ¨ç²¾åº¦
- **ç²¾åº¦**: Â±0åƒç´ è¯¯å·®ï¼ˆmouse_newåº“éªŒè¯ï¼‰
- **å“åº”æ—¶é—´**: å¹³å‡0.0002ç§’
- **ç§»åŠ¨èŒƒå›´**: 0-500åƒç´ ï¼ˆæµ‹è¯•éªŒè¯ï¼‰
- **æˆåŠŸç‡**: 100%

### æ ¸å¿ƒç®—æ³•ä¼˜åŒ–
```python
# åƒç´ åˆ°é¼ æ ‡ç§»åŠ¨è½¬æ¢
degrees_per_pixel_x = fov_x / screen_width
degrees_per_pixel_y = fov_y / screen_height
mouse_x = (pixel_x * degrees_per_pixel_x / 360) * (dpi / sensitivity)
mouse_y = (pixel_y * degrees_per_pixel_y / 360) * (dpi / sensitivity)

# ä½¿ç”¨mouse_newè¿›è¡Œç›¸å¯¹ç§»åŠ¨
mouse.move(mouse_x, mouse_y, absolute=False)
```

### ç›®æ ‡å¤„ç†æµç¨‹
1. **YOLOæ£€æµ‹** â†’ è·å–ç›®æ ‡åæ ‡å’Œç±»åˆ«
2. **åæ ‡è®¡ç®—** â†’ è®¡ç®—ä¸­å¿ƒç‚¹ï¼Œåº”ç”¨èº«ä½“åç§»
3. **ä¸€æ­¥ç§»åŠ¨** â†’ ç›´æ¥ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®
4. **é”å®šå°„å‡»** â†’ æ£€æŸ¥ç„å‡†èŒƒå›´å¹¶å¼€ç«

## ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¯åŠ¨
```bash
# æ–¹æ³•1: ä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶
run_ultra_simple.bat

# æ–¹æ³•2: ç›´æ¥è¿è¡ŒPythonè„šæœ¬
python3 run_ultra_simple.py
```

### é…ç½®è¦æ±‚
ä½¿ç”¨ç°æœ‰çš„ `config.ini` é…ç½®æ–‡ä»¶ï¼Œä¸»è¦å‚æ•°ï¼š
- `mouse_dpi` - é¼ æ ‡DPIè®¾ç½®
- `mouse_sensitivity` - æ¸¸æˆå†…çµæ•åº¦
- `mouse_fov_width/height` - è§†é‡èŒƒå›´
- `body_y_offset` - èº«ä½“ç›®æ ‡Yè½´åç§»
- `mouse_auto_aim` - è‡ªåŠ¨ç„å‡†å¼€å…³
- `auto_shoot` - è‡ªåŠ¨å°„å‡»å¼€å…³

### çƒ­é”®æ§åˆ¶
- **F2** - é€€å‡ºç¨‹åº
- **F3** - æš‚åœ/æ¢å¤
- **F4** - é‡æ–°åŠ è½½é…ç½®
- **ç„å‡†é”®** - æ ¹æ®config.iniä¸­hotkey_targetingè®¾ç½®

## ä¾èµ–è¦æ±‚

### åŸºç¡€ä¾èµ–
```bash
pip install ultralytics torch supervision pywin32
```

### ç³»ç»Ÿè¦æ±‚
- **Windows 7/8/10/11** (æ¨è)
- **Python 3.6+**
- **CUDA æ”¯æŒ** (å¯é€‰ï¼Œç”¨äºGPUåŠ é€Ÿ)

## æµ‹è¯•éªŒè¯

### è¿è¡ŒåŸºç¡€æµ‹è¯•
```bash
python3 test_mouse_new_basic.py
```

æµ‹è¯•é¡¹ç›®ï¼š
- âœ… Mouse_newåº“å¯¼å…¥æµ‹è¯•
- âœ… åƒç´ åˆ°é¼ æ ‡è½¬æ¢æµ‹è¯•  
- âœ… APIæ–‡æ¡£åˆè§„æ€§æµ‹è¯•

### é¢„æœŸè¾“å‡º
```
ğŸ‰ Basic mouse_new integration is working correctly!
âœ… You can proceed to test the full system
```

## ä¸ç°æœ‰ç³»ç»Ÿçš„åŒºåˆ«

### ä¼ ç»Ÿç³»ç»Ÿ (mouse.py, mouse_simple.py)
- å¤æ‚çš„PIDæ§åˆ¶ç®—æ³•
- å¤šé˜¶æ®µç§»åŠ¨ç­–ç•¥
- ç¼“å†²å’Œå¹³æ»‘æœºåˆ¶
- è¾ƒé«˜çš„ç³»ç»Ÿå¼€é”€

### æ–°ç³»ç»Ÿ (mouse_ultra_simple.py)
- ç›´æ¥çš„ç›¸å¯¹ç§»åŠ¨
- ä¸€æ­¥åˆ°ä½ç­–ç•¥
- æœ€å°åŒ–ç®—æ³•å¤æ‚åº¦
- æ›´å¿«çš„å“åº”æ—¶é—´

## é…ç½®ä¼˜åŒ–å»ºè®®

### ç²¾åº¦ä¼˜åŒ–
```ini
[Mouse]
mouse_dpi = 1100
mouse_sensitivity = 3.0
mouse_fov_width = 40
mouse_fov_height = 40
```

### ç„å‡†ä¼˜åŒ–
```ini
[Aim] 
body_y_offset = 0.1
disable_headshot = False
mouse_auto_aim = True
```

### å°„å‡»ä¼˜åŒ–
```ini
[Shooting]
auto_shoot = True
triggerbot = False
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ImportError: No module named 'mouse'**
   ```bash
   # æ£€æŸ¥mouse_newç›®å½•æ˜¯å¦å­˜åœ¨
   ls mouse_new/
   # é‡æ–°è¿è¡Œæµ‹è¯•
   python3 test_mouse_new_basic.py
   ```

2. **ImportError: No module named 'win32con'**
   ```bash
   pip install pywin32
   ```

3. **ImportError: No module named 'supervision'**
   ```bash
   pip install supervision
   ```

4. **é¼ æ ‡ç§»åŠ¨ä¸ç²¾ç¡®**
   - æ£€æŸ¥DPIå’Œçµæ•åº¦è®¾ç½®
   - ç¡®è®¤FOVå€¼ä¸æ¸¸æˆè®¾ç½®åŒ¹é…
   - è¿è¡ŒåŸºç¡€æµ‹è¯•éªŒè¯è½¬æ¢é€»è¾‘

### è°ƒè¯•æ¨¡å¼
å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š
```ini
[Debug window]
show_window = True
show_target_line = True
```

## æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | ä¼ ç»Ÿç³»ç»Ÿ | æ–°ç³»ç»Ÿ (mouse_new) |
|------|----------|-------------------|
| ç§»åŠ¨ç²¾åº¦ | 2-10px | Â±0px |
| å“åº”æ—¶é—´ | 0.009-0.050s | 0.0002s |
| ç®—æ³•å¤æ‚åº¦ | é«˜ (PID) | ä½ (ç›´æ¥) |
| ç³»ç»Ÿå¼€é”€ | ä¸­ç­‰ | æœ€å° |
| é€‚ç”¨åœºæ™¯ | å¤æ‚ç„å‡† | å¿«é€Ÿé”å®š |

## æœªæ¥æ‰©å±•

### å¯èƒ½çš„æ”¹è¿›æ–¹å‘
1. **å¹³æ»‘ç§»åŠ¨é€‰é¡¹** - æ·»åŠ å¯é€‰çš„ç§»åŠ¨å¹³æ»‘
2. **è‡ªé€‚åº”çµæ•åº¦** - æ ¹æ®ç›®æ ‡è·ç¦»è°ƒæ•´ç§»åŠ¨é€Ÿåº¦
3. **å¤šç›®æ ‡å¤„ç†** - æ™ºèƒ½é€‰æ‹©æœ€ä¼˜ç›®æ ‡
4. **é¢„æµ‹ç„å‡†** - æ·»åŠ ç§»åŠ¨ç›®æ ‡é¢„æµ‹

### æ‰©å±•æ¥å£
æ–°ç³»ç»Ÿè®¾è®¡ä¸ºæ¨¡å—åŒ–ï¼Œæ˜“äºæ‰©å±•ï¼š
```python
# è‡ªå®šä¹‰ç›®æ ‡å¤„ç†
def custom_target_processor(target_x, target_y, target_cls):
    # è‡ªå®šä¹‰é€»è¾‘
    pass

# é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ
ultra_simple_mouse.process_target = custom_target_processor
```

## ç»“è®º

mouse_new é›†æˆä¸ºé¡¹ç›®æä¾›äº†ï¼š
- âœ… **æ›´é«˜ç²¾åº¦** - é›¶è¯¯å·®çš„é¼ æ ‡ç§»åŠ¨
- âœ… **æ›´å¿«å“åº”** - æ¯«ç§’çº§çš„ç§»åŠ¨å»¶è¿Ÿ
- âœ… **æ›´ç®€å•** - ç›´è§‚çš„ä¸€æ­¥åˆ°ä½é€»è¾‘
- âœ… **æ›´ç¨³å®š** - ç»è¿‡éªŒè¯çš„å¯é API

æ–°ç³»ç»Ÿç‰¹åˆ«é€‚åˆéœ€è¦å¿«é€Ÿç²¾ç¡®é”å®šçš„åº”ç”¨åœºæ™¯ï¼Œä¸ºé¡¹ç›®æä¾›äº†æ€§èƒ½æ›´ä¼˜çš„é¼ æ ‡æ§åˆ¶è§£å†³æ–¹æ¡ˆã€‚